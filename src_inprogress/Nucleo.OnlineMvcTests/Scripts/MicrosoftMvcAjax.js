Type.registerNamespace("Sys.Mvc");Sys.Mvc.$create_AjaxOptions=function Sys_Mvc_AjaxOptions(){return{}};Sys.Mvc.InsertionMode=function(){};Sys.Mvc.InsertionMode.prototype={replace:0,insertBefore:1,insertAfter:2};Sys.Mvc.InsertionMode.registerEnum("Sys.Mvc.InsertionMode",false);Sys.Mvc.AjaxContext=function Sys_Mvc_AjaxContext(b,a,d,c){this._request=b;this._updateTarget=a;this._loadingElement=d;this._insertionMode=c};Sys.Mvc.AjaxContext.prototype={_insertionMode:0,_loadingElement:null,_response:null,_request:null,_updateTarget:null,get_data:function Sys_Mvc_AjaxContext$get_data(){if(this._response){return this._response.get_responseData()}else{return null}},get_insertionMode:function Sys_Mvc_AjaxContext$get_insertionMode(){return this._insertionMode},get_loadingElement:function Sys_Mvc_AjaxContext$get_loadingElement(){return this._loadingElement},get_object:function Sys_Mvc_AjaxContext$get_object(){var a=this.get_response();return(a)?a.get_object():null},get_response:function Sys_Mvc_AjaxContext$get_response(){return this._response},set_response:function Sys_Mvc_AjaxContext$set_response(a){this._response=a;return a},get_request:function Sys_Mvc_AjaxContext$get_request(){return this._request},get_updateTarget:function Sys_Mvc_AjaxContext$get_updateTarget(){return this._updateTarget}};Sys.Mvc.AsyncHyperlink=function Sys_Mvc_AsyncHyperlink(){};Sys.Mvc.AsyncHyperlink.handleClick=function Sys_Mvc_AsyncHyperlink$handleClick(b,a,c){a.preventDefault();Sys.Mvc.MvcHelpers._asyncRequest(b.href,"post","",b,c)};Sys.Mvc.MvcHelpers=function Sys_Mvc_MvcHelpers(){};Sys.Mvc.MvcHelpers._serializeSubmitButton=function Sys_Mvc_MvcHelpers$_serializeSubmitButton(a,g,h){if(a.disabled){return null}var e=a.name;if(e){var b=a.tagName.toUpperCase();var d=encodeURIComponent(e);var f=a;if(b==="INPUT"){var c=f.type;if(c==="submit"){return d+"="+encodeURIComponent(f.value)}else{if(c==="image"){return d+".x="+g+"&"+d+".y="+h}}}else{if((b==="BUTTON")&&(e.length)&&(f.type==="submit")){return d+"="+encodeURIComponent(f.value)}}}return null};Sys.Mvc.MvcHelpers._serializeForm=function Sys_Mvc_MvcHelpers$_serializeForm(d){var e=d.elements;var q=new Sys.StringBuilder();var p=e.length;for(var a=0;a<p;a++){var c=e[a];var k=c.name;if(!k||!k.length){continue}var l=c.tagName.toUpperCase();if(l==="INPUT"){var m=c;var f=m.type;if((f==="text")||(f==="password")||(f==="hidden")||(((f==="checkbox")||(f==="radio"))&&c.checked)){q.append(encodeURIComponent(k));q.append("=");q.append(encodeURIComponent(m.value));q.append("&")}}else{if(l==="SELECT"){var g=c;var o=g.options.length;for(var b=0;b<o;b++){var h=g.options[b];if(h.selected){q.append(encodeURIComponent(k));q.append("=");q.append(encodeURIComponent(h.value));q.append("&")}}}else{if(l==="TEXTAREA"){q.append(encodeURIComponent(k));q.append("=");q.append(encodeURIComponent((c.value)));q.append("&")}}}}var n=d._additionalInput;if(n){q.append(n);q.append("&")}return q.toString()};Sys.Mvc.MvcHelpers._asyncRequest=function Sys_Mvc_MvcHelpers$_asyncRequest(i,a,k,f,g){if(g.confirm){if(!confirm(g.confirm)){return}}if(g.url){i=g.url}if(g.httpMethod){a=g.httpMethod}if(k.length>0&&!k.endsWith("&")){k+="&"}k+="X-Requested-With=XMLHttpRequest";var h=a.toUpperCase();var m=(h==="GET"||h==="POST");if(!m){k+="&";k+="X-HTTP-Method-Override="+h}var c="";if(h==="GET"||h==="DELETE"){if(i.indexOf("?")>-1){if(!i.endsWith("&")){i+="&"}i+=k}else{i+="?";i+=k}}else{c=k}var d=new Sys.Net.WebRequest();d.set_url(i);if(m){d.set_httpVerb(a)}else{d.set_httpVerb("POST");d.get_headers()["X-HTTP-Method-Override"]=h}d.set_body(c);if(a.toUpperCase()==="PUT"){d.get_headers()["Content-Type"]="application/x-www-form-urlencoded;"}d.get_headers()["X-Requested-With"]="XMLHttpRequest";var l=null;if(g.updateTargetId){l=$get(g.updateTargetId)}var e=null;if(g.loadingElementId){e=$get(g.loadingElementId)}var b=new Sys.Mvc.AjaxContext(d,l,e,g.insertionMode);var j=true;if(g.onBegin){j=g.onBegin(b)!==false}if(e){Sys.UI.DomElement.setVisible(b.get_loadingElement(),true)}if(j){d.add_completed(Function.createDelegate(null,function(n){Sys.Mvc.MvcHelpers._onComplete(d,g,b)}));d.invoke()}};Sys.Mvc.MvcHelpers._onComplete=function Sys_Mvc_MvcHelpers$_onComplete(request,ajaxOptions,ajaxContext){ajaxContext.set_response(request.get_executor());if(ajaxOptions.onComplete&&ajaxOptions.onComplete(ajaxContext)===false){return}var statusCode=ajaxContext.get_response().get_statusCode();if((statusCode>=200&&statusCode<300)||statusCode===304||statusCode===1223){if(statusCode!==204&&statusCode!==304&&statusCode!==1223){var contentType=ajaxContext.get_response().getResponseHeader("Content-Type");if((contentType)&&(contentType.indexOf("application/x-javascript")!==-1)){eval(ajaxContext.get_data())}else{Sys.Mvc.MvcHelpers.updateDomElement(ajaxContext.get_updateTarget(),ajaxContext.get_insertionMode(),ajaxContext.get_data())}}if(ajaxOptions.onSuccess){ajaxOptions.onSuccess(ajaxContext)}}else{if(ajaxOptions.onFailure){ajaxOptions.onFailure(ajaxContext)}}if(ajaxContext.get_loadingElement()){Sys.UI.DomElement.setVisible(ajaxContext.get_loadingElement(),false)}};Sys.Mvc.MvcHelpers.updateDomElement=function Sys_Mvc_MvcHelpers$updateDomElement(b,a,c){if(b){switch(a){case Sys.Mvc.InsertionMode.replace:b.innerHTML=c;break;case Sys.Mvc.InsertionMode.insertBefore:if(c&&c.length>0){b.innerHTML=c+b.innerHTML.trimStart()}break;case Sys.Mvc.InsertionMode.insertAfter:if(c&&c.length>0){b.innerHTML=b.innerHTML.trimEnd()+c}break}}};Sys.Mvc.AsyncForm=function Sys_Mvc_AsyncForm(){};Sys.Mvc.AsyncForm.handleClick=function Sys_Mvc_AsyncForm$handleClick(c,a){var b=Sys.Mvc.MvcHelpers._serializeSubmitButton(a.target,a.offsetX,a.offsetY);c._additionalInput=b};Sys.Mvc.AsyncForm.handleSubmit=function Sys_Mvc_AsyncForm$handleSubmit(d,c,g){c.preventDefault();var f=d.validationCallbacks;if(f){for(var e=0;e<f.length;e++){var b=f[e];if(!b()){return}}}var a=Sys.Mvc.MvcHelpers._serializeForm(d);Sys.Mvc.MvcHelpers._asyncRequest(d.action,d.method||"post",a,d,g)};Sys.Mvc.AjaxContext.registerClass("Sys.Mvc.AjaxContext");Sys.Mvc.AsyncHyperlink.registerClass("Sys.Mvc.AsyncHyperlink");Sys.Mvc.MvcHelpers.registerClass("Sys.Mvc.MvcHelpers");Sys.Mvc.AsyncForm.registerClass("Sys.Mvc.AsyncForm");